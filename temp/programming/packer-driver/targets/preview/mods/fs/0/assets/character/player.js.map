{"version":3,"sources":["file:///C:/Users/qp/test_1/assets/character/player.ts"],"names":["_decorator","Component","systemEvent","SystemEventType","macro","Vec2","RigidBody2D","BoxCollider2D","Contact2DType","Label","ccclass","property","Player","type","onLoad","on","KEY_DOWN","onKeyDown","KEY_UP","onKeyUp","start","rigidbody","node","getComponent","collider","BEGIN_CONTACT","onBeginContact","update","deltaTime","applyForceToCenter","direction","walk_force","selfCollider","otherCollider","contact","name","destroyStar","score","scoreLabel","string","event","keyCode","KEY","a","left","d","right","space","up","jump_force"],"mappings":"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","sourcesContent":["\r\nimport { _decorator, Component, Node, systemEvent, SystemEventType, EventKeyboard, macro, Vec2, RigidBody2D, Collider2D, BoxCollider2D, Contact2DType, IPhysics2DContact, Label} from 'cc';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('Player')\r\nexport class Player extends Component {\r\n\r\n    @property({type: Label})\r\n    private scoreLabel: Label | null = null;\r\n    private score: number = 0;\r\n\r\n    private collider: any;\r\n\r\n    private rigidbody: any;\r\n    private direction: number = 0;\r\n    private walk_force: number = 1000;\r\n    private jump_force: number = 35000;\r\n   \r\n\r\n    onLoad() {\r\n        systemEvent.on(SystemEventType.KEY_DOWN, this.onKeyDown, this);\r\n        systemEvent.on(SystemEventType.KEY_UP, this.onKeyUp, this);\r\n    }\r\n\r\n    start () {\r\n        this.rigidbody = this.node.getComponent(RigidBody2D);\r\n\r\n        this.collider = this.node.getComponent(BoxCollider2D);\r\n        if( this.collider ) {\r\n            this.collider.on(Contact2DType.BEGIN_CONTACT, this.onBeginContact, this);\r\n        }\r\n    }\r\n\r\n    update (deltaTime: number) {\r\n        this.rigidbody.applyForceToCenter( new Vec2( this.direction * this.walk_force, 0 ), true );\r\n    }\r\n\r\n    onBeginContact( selfCollider: BoxCollider2D, otherCollider: BoxCollider2D, contact: IPhysics2DContact | null ) {\r\n        \r\n        if( otherCollider.name == \"star<BoxCollider2D>\" ){\r\n            otherCollider.node.getComponent(\"Star\").destroyStar();\r\n            this.score++;\r\n            this.scoreLabel.string = \"Score: \" + this.score;\r\n        }\r\n\r\n    }\r\n\r\n    onKeyDown(event: EventKeyboard) {\r\n        switch ( event.keyCode ) {\r\n            case macro.KEY.a:\r\n            case macro.KEY.left: {\r\n                this.direction = -1;\r\n                break;\r\n            }\r\n            case macro.KEY.d:\r\n            case macro.KEY.right: {\r\n                this.direction = 1;\r\n                break;\r\n            }\r\n            case macro.KEY.space:\r\n            case macro.KEY.up: {\r\n                this.rigidbody.applyForceToCenter( new Vec2( 0, this.jump_force ), true );\r\n                break;\r\n            }\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    onKeyUp(event: EventKeyboard) {\r\n        switch ( event.keyCode ) {\r\n            case macro.KEY.a:\r\n            case macro.KEY.left: {\r\n                this.direction = 0;\r\n                break;\r\n            }\r\n            case macro.KEY.d:\r\n            case macro.KEY.right: {\r\n                this.direction = 0;\r\n                break;\r\n            }\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * [1] Class member could be defined like this.\r\n * [2] Use `property` decorator if your want the member to be serializable.\r\n * [3] Your initialization goes here.\r\n * [4] Your update function goes here.\r\n *\r\n * Learn more about scripting: https://docs.cocos.com/creator/3.0/manual/en/scripting/\r\n * Learn more about CCClass: https://docs.cocos.com/creator/3.0/manual/en/scripting/ccclass.html\r\n * Learn more about life-cycle callbacks: https://docs.cocos.com/creator/3.0/manual/en/scripting/life-cycle-callbacks.html\r\n */\r\n"]}